import type { CaliforniaTaxTables } from "./types"

/**
 * 2026 California Tax Tables
 * Source: EDD DE 44 (2026), 2026 Withholding Schedules - Method B
 *
 * Key changes from 2025:
 * - Standard deduction: single $5,540 → $5,706, married 2+/HoH $11,080 → $11,412
 * - Exemption allowance: $163.90 → $168.30 per allowance
 * - Tax bracket thresholds adjusted for inflation
 * - Low income exemption: unchanged ($18,368 single, $36,736 married/HoH)
 * - Estimated deduction: unchanged ($1,000 per allowance)
 */
export const californiaTaxTables2026: CaliforniaTaxTables = {
  year: 2026,

  /**
   * Table 1: Low Income Exemption Table
   * Annual: Single $18,368, Married/HoH $36,736 (unchanged from 2025)
   */
  lowIncomeExemption: [
    {
      payrollPeriod: "WEEKLY",
      singleOrDualIncome: 353,
      marriedAllowances0or1: 353,
      marriedAllowances2plus: 706,
      unmarriedHeadOfHousehold: 706,
    },
    {
      payrollPeriod: "BIWEEKLY",
      singleOrDualIncome: 706,
      marriedAllowances0or1: 706,
      marriedAllowances2plus: 1413,
      unmarriedHeadOfHousehold: 1413,
    },
    {
      payrollPeriod: "SEMI-MONTHLY",
      singleOrDualIncome: 765,
      marriedAllowances0or1: 765,
      marriedAllowances2plus: 1531,
      unmarriedHeadOfHousehold: 1531,
    },
    {
      payrollPeriod: "MONTHLY",
      singleOrDualIncome: 1531,
      marriedAllowances0or1: 1531,
      marriedAllowances2plus: 3061,
      unmarriedHeadOfHousehold: 3061,
    },
    {
      payrollPeriod: "QUARTERLY",
      singleOrDualIncome: 4592,
      marriedAllowances0or1: 4592,
      marriedAllowances2plus: 9184,
      unmarriedHeadOfHousehold: 9184,
    },
    {
      payrollPeriod: "SEMI-ANNUAL",
      singleOrDualIncome: 9184,
      marriedAllowances0or1: 9184,
      marriedAllowances2plus: 18368,
      unmarriedHeadOfHousehold: 18368,
    },
    {
      payrollPeriod: "ANNUAL",
      singleOrDualIncome: 18368,
      marriedAllowances0or1: 18368,
      marriedAllowances2plus: 36736,
      unmarriedHeadOfHousehold: 36736,
    },
    {
      payrollPeriod: "DAILY/MISC.",
      singleOrDualIncome: 71,
      marriedAllowances0or1: 71,
      marriedAllowances2plus: 141,
      unmarriedHeadOfHousehold: 141,
    },
  ],

  /**
   * Table 2: Estimated Deduction Table
   * $1,000 per allowance annually (unchanged from 2025)
   */
  estimatedDeduction: [
    {
      allowances: 1,
      weekly: 19,
      biweekly: 38,
      semimonthly: 42,
      monthly: 83,
      quarterly: 250,
      semiAnnual: 500,
      annual: 1000,
      dailyOrMisc: 4,
    },
    {
      allowances: 2,
      weekly: 38,
      biweekly: 77,
      semimonthly: 83,
      monthly: 167,
      quarterly: 500,
      semiAnnual: 1000,
      annual: 2000,
      dailyOrMisc: 8,
    },
    {
      allowances: 3,
      weekly: 58,
      biweekly: 115,
      semimonthly: 125,
      monthly: 250,
      quarterly: 750,
      semiAnnual: 1500,
      annual: 3000,
      dailyOrMisc: 12,
    },
    {
      allowances: 4,
      weekly: 77,
      biweekly: 154,
      semimonthly: 167,
      monthly: 333,
      quarterly: 1000,
      semiAnnual: 2000,
      annual: 4000,
      dailyOrMisc: 15,
    },
    {
      allowances: 5,
      weekly: 96,
      biweekly: 192,
      semimonthly: 208,
      monthly: 417,
      quarterly: 1250,
      semiAnnual: 2500,
      annual: 5000,
      dailyOrMisc: 19,
    },
    {
      allowances: 6,
      weekly: 115,
      biweekly: 231,
      semimonthly: 250,
      monthly: 500,
      quarterly: 1500,
      semiAnnual: 3000,
      annual: 6000,
      dailyOrMisc: 23,
    },
    {
      allowances: 7,
      weekly: 135,
      biweekly: 269,
      semimonthly: 292,
      monthly: 583,
      quarterly: 1750,
      semiAnnual: 3500,
      annual: 7000,
      dailyOrMisc: 27,
    },
    {
      allowances: 8,
      weekly: 154,
      biweekly: 308,
      semimonthly: 333,
      monthly: 667,
      quarterly: 2000,
      semiAnnual: 4000,
      annual: 8000,
      dailyOrMisc: 31,
    },
    {
      allowances: 9,
      weekly: 173,
      biweekly: 346,
      semimonthly: 375,
      monthly: 750,
      quarterly: 2250,
      semiAnnual: 4500,
      annual: 9000,
      dailyOrMisc: 35,
    },
    {
      allowances: 10,
      weekly: 192,
      biweekly: 385,
      semimonthly: 417,
      monthly: 833,
      quarterly: 2500,
      semiAnnual: 5000,
      annual: 10000,
      dailyOrMisc: 38,
    },
  ],

  /**
   * Table 3: Standard Deduction Table
   * Annual: Single/Married 0-1 = $5,706, Married 2+/HoH = $11,412
   */
  standardDeduction: [
    {
      payrollPeriod: "WEEKLY",
      singleOrDualIncome: 110,
      marriedAllowances0or1: 110,
      marriedAllowances2plus: 219,
      unmarriedHeadOfHousehold: 219,
    },
    {
      payrollPeriod: "BIWEEKLY",
      singleOrDualIncome: 219,
      marriedAllowances0or1: 219,
      marriedAllowances2plus: 439,
      unmarriedHeadOfHousehold: 439,
    },
    {
      payrollPeriod: "SEMI-MONTHLY",
      singleOrDualIncome: 238,
      marriedAllowances0or1: 238,
      marriedAllowances2plus: 476,
      unmarriedHeadOfHousehold: 476,
    },
    {
      payrollPeriod: "MONTHLY",
      singleOrDualIncome: 476,
      marriedAllowances0or1: 476,
      marriedAllowances2plus: 951,
      unmarriedHeadOfHousehold: 951,
    },
    {
      payrollPeriod: "QUARTERLY",
      singleOrDualIncome: 1427,
      marriedAllowances0or1: 1427,
      marriedAllowances2plus: 2853,
      unmarriedHeadOfHousehold: 2853,
    },
    {
      payrollPeriod: "SEMI-ANNUAL",
      singleOrDualIncome: 2853,
      marriedAllowances0or1: 2853,
      marriedAllowances2plus: 5706,
      unmarriedHeadOfHousehold: 5706,
    },
    {
      payrollPeriod: "ANNUAL",
      singleOrDualIncome: 5706,
      marriedAllowances0or1: 5706,
      marriedAllowances2plus: 11412,
      unmarriedHeadOfHousehold: 11412,
    },
    {
      payrollPeriod: "DAILY/MISC.",
      singleOrDualIncome: 22,
      marriedAllowances0or1: 22,
      marriedAllowances2plus: 44,
      unmarriedHeadOfHousehold: 44,
    },
  ],

  /**
   * Table 4: Exemption Allowance Table
   * $168.30 per allowance annually (up from $163.90 in 2025)
   */
  exemptionAllowance: [
    {
      allowances: 0,
      weekly: 0.0,
      biweekly: 0.0,
      semimonthly: 0.0,
      monthly: 0.0,
      quarterly: 0.0,
      semiAnnual: 0.0,
      annual: 0.0,
      dailyMisc: 0.0,
    },
    {
      allowances: 1,
      weekly: 3.24,
      biweekly: 6.47,
      semimonthly: 7.01,
      monthly: 14.03,
      quarterly: 42.08,
      semiAnnual: 84.15,
      annual: 168.3,
      dailyMisc: 0.65,
    },
    {
      allowances: 2,
      weekly: 6.47,
      biweekly: 12.95,
      semimonthly: 14.03,
      monthly: 28.05,
      quarterly: 84.15,
      semiAnnual: 168.3,
      annual: 336.6,
      dailyMisc: 1.29,
    },
    {
      allowances: 3,
      weekly: 9.71,
      biweekly: 19.42,
      semimonthly: 21.04,
      monthly: 42.08,
      quarterly: 126.23,
      semiAnnual: 252.45,
      annual: 504.9,
      dailyMisc: 1.94,
    },
    {
      allowances: 4,
      weekly: 12.95,
      biweekly: 25.89,
      semimonthly: 28.05,
      monthly: 56.1,
      quarterly: 168.3,
      semiAnnual: 336.6,
      annual: 673.2,
      dailyMisc: 2.59,
    },
    {
      allowances: 5,
      weekly: 16.18,
      biweekly: 32.37,
      semimonthly: 35.06,
      monthly: 70.13,
      quarterly: 210.38,
      semiAnnual: 420.75,
      annual: 841.5,
      dailyMisc: 3.24,
    },
    {
      allowances: 6,
      weekly: 19.42,
      biweekly: 38.84,
      semimonthly: 42.08,
      monthly: 84.15,
      quarterly: 252.45,
      semiAnnual: 504.9,
      annual: 1009.8,
      dailyMisc: 3.88,
    },
    {
      allowances: 7,
      weekly: 22.66,
      biweekly: 45.31,
      semimonthly: 49.09,
      monthly: 98.18,
      quarterly: 294.53,
      semiAnnual: 589.05,
      annual: 1178.1,
      dailyMisc: 4.53,
    },
    {
      allowances: 8,
      weekly: 25.89,
      biweekly: 51.78,
      semimonthly: 56.1,
      monthly: 112.2,
      quarterly: 336.6,
      semiAnnual: 673.2,
      annual: 1346.4,
      dailyMisc: 5.18,
    },
    {
      allowances: 9,
      weekly: 29.13,
      biweekly: 58.26,
      semimonthly: 63.11,
      monthly: 126.23,
      quarterly: 378.68,
      semiAnnual: 757.35,
      annual: 1514.7,
      dailyMisc: 5.83,
    },
    {
      allowances: 10,
      weekly: 32.37,
      biweekly: 64.73,
      semimonthly: 70.13,
      monthly: 140.25,
      quarterly: 420.75,
      semiAnnual: 841.5,
      annual: 1683.0,
      dailyMisc: 6.47,
    },
  ],

  /**
   * Table 5: Tax Brackets
   * Rates: 1.1%, 2.2%, 4.4%, 6.6%, 8.8%, 10.23%, 11.33%, 12.43%, 13.53%, 14.63%
   * Bracket thresholds derived from 2026 annual brackets (EDD DE 44)
   */
  taxBrackets: {
    monthly: {
      // Single Persons, Dual Income Married, or Married with Multiple Employers
      single: [
        { min: 0, max: 923, rate: 0.011, baseOver: 0, baseTax: 0.0 },
        { min: 923, max: 2189, rate: 0.022, baseOver: 923, baseTax: 10.15 },
        { min: 2189, max: 3454, rate: 0.044, baseOver: 2189, baseTax: 38.0 },
        { min: 3454, max: 4795, rate: 0.066, baseOver: 3454, baseTax: 93.66 },
        { min: 4795, max: 6060, rate: 0.088, baseOver: 4795, baseTax: 182.17 },
        {
          min: 6060,
          max: 30957,
          rate: 0.1023,
          baseOver: 6060,
          baseTax: 293.49,
        },
        {
          min: 30957,
          max: 37148,
          rate: 0.1133,
          baseOver: 30957,
          baseTax: 2840.45,
        },
        {
          min: 37148,
          max: 61913,
          rate: 0.1243,
          baseOver: 37148,
          baseTax: 3541.69,
        },
        {
          min: 61913,
          max: 83334,
          rate: 0.1353,
          baseOver: 61913,
          baseTax: 6620.08,
        },
        {
          min: 83334,
          max: Infinity,
          rate: 0.1463,
          baseOver: 83334,
          baseTax: 9518.35,
        },
      ],
      // Married Persons
      married: [
        { min: 0, max: 1847, rate: 0.011, baseOver: 0, baseTax: 0.0 },
        { min: 1847, max: 4377, rate: 0.022, baseOver: 1847, baseTax: 20.32 },
        { min: 4377, max: 6909, rate: 0.044, baseOver: 4377, baseTax: 75.98 },
        {
          min: 6909,
          max: 9590,
          rate: 0.066,
          baseOver: 6909,
          baseTax: 187.39,
        },
        {
          min: 9590,
          max: 12121,
          rate: 0.088,
          baseOver: 9590,
          baseTax: 364.33,
        },
        {
          min: 12121,
          max: 61913,
          rate: 0.1023,
          baseOver: 12121,
          baseTax: 587.06,
        },
        {
          min: 61913,
          max: 74295,
          rate: 0.1133,
          baseOver: 61913,
          baseTax: 5680.78,
        },
        {
          min: 74295,
          max: 83334,
          rate: 0.1243,
          baseOver: 74295,
          baseTax: 7083.66,
        },
        {
          min: 83334,
          max: 123826,
          rate: 0.1353,
          baseOver: 83334,
          baseTax: 8207.21,
        },
        {
          min: 123826,
          max: Infinity,
          rate: 0.1463,
          baseOver: 123826,
          baseTax: 13685.78,
        },
      ],
      // Unmarried/Head of Household
      headOfHousehold: [
        { min: 0, max: 1848, rate: 0.011, baseOver: 0, baseTax: 0.0 },
        { min: 1848, max: 4378, rate: 0.022, baseOver: 1848, baseTax: 20.33 },
        { min: 4378, max: 5643, rate: 0.044, baseOver: 4378, baseTax: 75.99 },
        {
          min: 5643,
          max: 6984,
          rate: 0.066,
          baseOver: 5643,
          baseTax: 131.65,
        },
        {
          min: 6984,
          max: 8249,
          rate: 0.088,
          baseOver: 6984,
          baseTax: 220.15,
        },
        {
          min: 8249,
          max: 42101,
          rate: 0.1023,
          baseOver: 8249,
          baseTax: 331.47,
        },
        {
          min: 42101,
          max: 50521,
          rate: 0.1133,
          baseOver: 42101,
          baseTax: 3794.53,
        },
        {
          min: 50521,
          max: 83334,
          rate: 0.1243,
          baseOver: 50521,
          baseTax: 4748.52,
        },
        {
          min: 83334,
          max: 84201,
          rate: 0.1353,
          baseOver: 83334,
          baseTax: 8827.18,
        },
        {
          min: 84201,
          max: Infinity,
          rate: 0.1463,
          baseOver: 84201,
          baseTax: 8944.48,
        },
      ],
    },
    biweekly: {
      // Single Persons, Dual Income Married, or Married with Multiple Employers
      single: [
        { min: 0, max: 426, rate: 0.011, baseOver: 0, baseTax: 0.0 },
        { min: 426, max: 1010, rate: 0.022, baseOver: 426, baseTax: 4.69 },
        { min: 1010, max: 1594, rate: 0.044, baseOver: 1010, baseTax: 17.54 },
        { min: 1594, max: 2213, rate: 0.066, baseOver: 1594, baseTax: 43.24 },
        { min: 2213, max: 2797, rate: 0.088, baseOver: 2213, baseTax: 84.09 },
        {
          min: 2797,
          max: 14288,
          rate: 0.1023,
          baseOver: 2797,
          baseTax: 135.48,
        },
        {
          min: 14288,
          max: 17145,
          rate: 0.1133,
          baseOver: 14288,
          baseTax: 1312.54,
        },
        {
          min: 17145,
          max: 28575,
          rate: 0.1243,
          baseOver: 17145,
          baseTax: 1636.07,
        },
        {
          min: 28575,
          max: 38462,
          rate: 0.1353,
          baseOver: 28575,
          baseTax: 3056.55,
        },
        {
          min: 38462,
          max: Infinity,
          rate: 0.1463,
          baseOver: 38462,
          baseTax: 4393.67,
        },
      ],
      // Married Persons
      married: [
        { min: 0, max: 852, rate: 0.011, baseOver: 0, baseTax: 0.0 },
        { min: 852, max: 2020, rate: 0.022, baseOver: 852, baseTax: 9.37 },
        { min: 2020, max: 3189, rate: 0.044, baseOver: 2020, baseTax: 35.07 },
        { min: 3189, max: 4426, rate: 0.066, baseOver: 3189, baseTax: 86.5 },
        {
          min: 4426,
          max: 5594,
          rate: 0.088,
          baseOver: 4426,
          baseTax: 168.14,
        },
        {
          min: 5594,
          max: 28575,
          rate: 0.1023,
          baseOver: 5594,
          baseTax: 270.93,
        },
        {
          min: 28575,
          max: 34290,
          rate: 0.1133,
          baseOver: 28575,
          baseTax: 2621.89,
        },
        {
          min: 34290,
          max: 38462,
          rate: 0.1243,
          baseOver: 34290,
          baseTax: 3269.09,
        },
        {
          min: 38462,
          max: 57150,
          rate: 0.1353,
          baseOver: 38462,
          baseTax: 3787.67,
        },
        {
          min: 57150,
          max: Infinity,
          rate: 0.1463,
          baseOver: 57150,
          baseTax: 6316.27,
        },
      ],
      // Unmarried/Head of Household
      headOfHousehold: [
        { min: 0, max: 853, rate: 0.011, baseOver: 0, baseTax: 0.0 },
        { min: 853, max: 2020, rate: 0.022, baseOver: 853, baseTax: 9.38 },
        { min: 2020, max: 2604, rate: 0.044, baseOver: 2020, baseTax: 35.06 },
        { min: 2604, max: 3223, rate: 0.066, baseOver: 2604, baseTax: 60.76 },
        {
          min: 3223,
          max: 3807,
          rate: 0.088,
          baseOver: 3223,
          baseTax: 101.61,
        },
        {
          min: 3807,
          max: 19431,
          rate: 0.1023,
          baseOver: 3807,
          baseTax: 153.0,
        },
        {
          min: 19431,
          max: 23317,
          rate: 0.1133,
          baseOver: 19431,
          baseTax: 1751.33,
        },
        {
          min: 23317,
          max: 38462,
          rate: 0.1243,
          baseOver: 23317,
          baseTax: 2191.65,
        },
        {
          min: 38462,
          max: 38862,
          rate: 0.1353,
          baseOver: 38462,
          baseTax: 4073.67,
        },
        {
          min: 38862,
          max: Infinity,
          rate: 0.1463,
          baseOver: 38862,
          baseTax: 4127.8,
        },
      ],
    },
  },
}
